## 4.1 姿勢推定とOpenPoseの概要

- 姿勢推定とは、何をインプットに何をアウトプットする手法なのか理解する
    - 画像→複数人物検出
    - →各人物の部位検出 (18)
    - →部位をつなぐ線(リンク, 37)を求める
- MS COCO Keypointsデータを理解する
    - MS COCO : 画像を使用したDLタスク全般の汎用データセット
        - 想定タスク：画像分類、物体検出、セマンティックセグメンテーション、姿勢推定、キャプション生成
    - Keypoints : 姿勢推定用のデータセット
        - ファイル形式：json
        - 複数人物の表現：json_self, json_others
        - 訓練/検証の分割：datasetキー(COCO, COCO_val)またはisValidationキー
        - 画像データのリンク：img_pathsキー
        - メイン人物の部位アノテーション数：num_keypoints(最大17, 首なし)
        - メイン人物のバウンディングボックス情報：scale_providedキー、368pixelの何倍か
        - 部位の座標、視認性情報：joint_self, joint_othersキー(x, y, 視認性情報)
            - 視認性情報：0 - 座標あり、部位映像なし、1 - 座標、部位映像あり、2 - 座標、部位映像なし
- 姿勢推定タスクの概要
    - 部位の特定 - セマンティックセグメンテーション
        - ピクセルごとに、クラス分類(3章)ではなく、確率を回帰する(18部位+その他)
    - 複数の部位の対応付け、リンクペア問題 (例：画像中の二人分の部位を、どうやって人ごとに分けるか)
        - top-downアプローチ：物体検出で人物切り出し
            - 欠点1. 計算量が人数に比例して肥大化
            - 欠点2. 姿勢推定精度が物体検出精度に依存
        - bottom-upアプローチ：直接部位を対応付ける(OpenPoseのPAFs)
- PAFs (Part Affinity Fields) の概念を理解する
    - 全人物の全部位を特定
    - ピクセルごとに、37リンク(例：左肘-左手首)に該当する確率を回帰する
- OpenPoseによる姿勢推定の3 stepの流れを理解する
    1. 前処理：368x368にリサイズ、色情報の標準化
    1. 推論：画像→ピクセルごと部位確信度(19x368x368), ピクセルごとリンク確信度(PAF, 38x368x368)
    1. 後処理：部位座標の決定(1ピクセル)、リンクの決定(部位座標とPAFから導出)、リサイズ

## 4.2 DatasetとDataLoaderの実装

- マスクデータについて理解する
    - 姿勢推定モデルの性能劣化を防ぐため、アノテーションが存在しない人物を黒く塗りつぶす
- OpenPoseで使用するDataset、DataLoaderを実装できるようになる
    - 省略
- OpenPoseの前処理およびデータオーギュメンテーションで何をしているか理解する
    - 前処理
        - アノテーション辞書を作成し、首座標((右肩+左肩)/2)を追加
            - 検出部位を増やして、推定精度を高めるため
    - オーギュメンテーション
        - 画像処理
            - 拡大・縮小、回転、切り出し、反転
        - アノテーション辞書の修正
            - 画像処理によりはみ出た部位について、アノテーションの視認性情報を修正する
    - 色情報の標準化
    - アノテーション画像の作成
        - 部位アノテーション画像 - heatmapsの作成 (サイズ:46x46, Featuresモジュールに合わせる)
            - 正解範囲が不当に小さい(1px)ため、ガウス分布で周辺ピクセルの確率を設定する
        - リンクアノテーション画像 - PAFsの作成 (サイズ:46x46, 同上)
            - 部位間の直線上のピクセルを1とする

## 4.3 OpenPoseのネットワーク構成と実装
## 4.4 Feature、Stageモジュールの解説と実装
## 4.5 TensorBoardXを使用したネットワークの可視化手法
## 4.6 OpenPoseの学習
## 4.7 OpenPoseの推論